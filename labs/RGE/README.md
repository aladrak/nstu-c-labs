
# –†–ì–ó "–†–∞–∑–±–æ—Ä —Ç–∏–ø–∞ `double`"

| –í—É–∑ | –§–∞–∫—É–ª—å—Ç–µ—Ç | –ö–∞—Ñ–µ–¥—Ä–∞ | –ö—É—Ä—Å | –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å |
|-----|-----------|---------|------|---------------|
| –ù–ì–¢–£| –ê–í–¢–§ | –°–°–û–î | 1 | –ì—É–∂–æ–≤ |

–ì—É–∂–æ–≤ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á—É –∫–∞–∫ "–≤–æ—Ç –µ—Å—Ç—å —Ç–∏–ø —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π –∏ —Å –Ω–∏–º –Ω—É–∂–Ω–æ —á—Ç–æ-—Ç–æ —Å–¥–µ–ª–∞—Ç—å", –Ω–æ —á—Ç–æ –∏–º–µ–Ω–Ω–æ? –ù–µ –æ–±—ä—è—Å–Ω—è–µ—Ç. 
–≠—Ç–∞ –∫—Ä–∞—Ç–∫–∞—è —Ç–µ–æ—Ä–∏—è –ø—Ä–∏–∑–≤–∞–Ω–∞ –ø–æ–º–æ—á—å —Å—Ç—É–¥–µ–Ω—Ç—É —Å–¥–∞—Ç—å –†–ì–ó

# –¢–∏–ø `double` –≤ —è–∑—ã–∫–µ C

–¢–∏–ø `double` ‚Äî —ç—Ç–æ –æ–¥–∏–Ω –∏–∑ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π –≤ —è–∑—ã–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è C. –û–Ω –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö (–¥—Ä–æ–±–Ω—ã—Ö) —á–∏—Å–µ–ª —Å –≤—ã—Å–æ–∫–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é.

---

## –û–±—â–∞—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞

- **–ù–∞–∑–≤–∞–Ω–∏–µ**: `double` (–æ—Ç *double precision* ‚Äî –¥–≤–æ–π–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å).
- **–†–∞–∑–º–µ—Ä**: –û–±—ã—á–Ω–æ **8 –±–∞–π—Ç** (64 –±–∏—Ç–∞).
- **–î–∏–∞–ø–∞–∑–æ–Ω –∑–Ω–∞—á–µ–Ω–∏–π**: –æ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ **¬±2.23 √ó 10‚Åª¬≥‚Å∞‚Å∏** –¥–æ **¬±1.80 √ó 10¬≥‚Å∞‚Å∏**.
- **–¢–æ—á–Ω–æ—Å—Ç—å**: –ø—Ä–∏–º–µ—Ä–Ω–æ **15‚Äì17 –∑–Ω–∞—á–∞—â–∏—Ö –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö —Ü–∏—Ñ—Ä**.

---

## –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ

–¢–∏–ø `double` —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –ø–æ —Ñ–æ—Ä–º–∞—Ç—É **IEEE 754**, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–¥–∞—ë—Ç —Å—Ç—Ä–æ–≥—É—é –±–∏—Ç–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É:

| –ü–æ–ª–µ             | –ë–∏—Ç—ã     | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------------|----------|----------|
| –ó–Ω–∞–∫             | 1 –±–∏—Ç (63) | `0` = –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ, `1` = –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ |
| –ü–æ—Ä—è–¥–æ–∫ (—ç–∫—Å–ø–æ–Ω–µ–Ω—Ç–∞) | 11 –±–∏—Ç (62‚Äì52) | –°–æ —Å–º–µ—â–µ–Ω–∏–µ–º **1023** |
| –ú–∞–Ω—Ç–∏—Å—Å–∞         | 52 –±–∏—Ç–∞ (51‚Äì0) | –î—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å; –≤–µ–¥—É—â–∞—è `1.` **–Ω–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è** (implicit bit) |

### –§–æ—Ä–º—É–ª–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è:

\[
\text{value} = (-1)^{\text{sign}} \times (1 + \text{mantissa}) \times 2^{\text{exponent} - 1023}
\]

> üîç –ü—Ä–∏–º–µ—Ä: —á–∏—Å–ª–æ `3.0` —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫:
> - –∑–Ω–∞–∫: `0`
> - —ç–∫—Å–ø–æ–Ω–µ–Ω—Ç–∞: `1024` ‚Üí –∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ `1024` (–≤ –¥–≤–æ–∏—á–Ω–æ–º –≤–∏–¥–µ)
> - –º–∞–Ω—Ç–∏—Å—Å–∞: `0.5` ‚Üí `010000...0` (—Ç–∞–∫ –∫–∞–∫ `1 + 0.5 = 1.5`, `1.5 √ó 2¬π = 3.0`)

### –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
- **–ù–æ–ª—å**: `exponent = 0`, `mantissa = 0`
- **¬±‚àû**: `exponent = 2047`, `mantissa = 0`
- **NaN**: `exponent = 2047`, `mantissa ‚â† 0`

---

| –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ç–æ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------------|--------|
| `%f`         | –î–µ—Å—è—Ç–∏—á–Ω–∞—è –¥—Ä–æ–±—å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 6 –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ —Ç–æ—á–∫–∏) |
| `%e`         | –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å (`1.23e+04`) |
| `%g`         | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –º–µ–∂–¥—É `%f` –∏ `%e` (–±–µ–∑ –Ω–µ–∑–Ω–∞—á–∞—â–∏—Ö –Ω—É–ª–µ–π) |

---

## –¢–æ—á–Ω–æ—Å—Ç—å –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

### –ü–æ—á–µ–º—É `0.1 + 0.2 != 0.3`?

```c
double a = 0.1 + 0.2;
double b = 0.3;
printf("%d\n", a == b); // –í—ã–≤–µ–¥–µ—Ç 0 (false)!
```

---

## –ö–∞–∫ –∏–º–µ–Ω–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è —á–∏—Å–ª–æ `0.1` –≤ —Ñ–æ—Ä–º–∞—Ç–µ `double`

–ß–∏—Å–ª–æ **`0.1`** (–æ–¥–Ω–∞ –¥–µ—Å—è—Ç–∞—è) **–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ—á–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ** –≤ –¥–≤–æ–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ —Å—á–∏—Å–ª–µ–Ω–∏—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –¥–≤–æ–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –æ–Ω–æ —è–≤–ª—è–µ—Ç—Å—è **–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –¥—Ä–æ–±—å—é**, –∫–∞–∫ `1/3 = 0.333...` –≤ –¥–µ—Å—è—Ç–∏—á–Ω–æ–π.

### –®–∞–≥ 1: –ü–µ—Ä–µ–≤–æ–¥ `0.1` –≤ –¥–≤–æ–∏—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É

```
0.1‚ÇÅ‚ÇÄ = 0.0001100110011001100110011001100110011001100110011...‚ÇÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è "0011" ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

–≠—Ç–æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è –¥—Ä–æ–±—å: `0.(0011)‚ÇÇ`.

### –®–∞–≥ 2: –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è

–ß—Ç–æ–±—ã –∑–∞–ø–∏—Å–∞—Ç—å —á–∏—Å–ª–æ –≤ –ø–∞–º—è—Ç–∏, –Ω—É–∂–Ω–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –≤–∏–¥—É `1.xxxx √ó 2^E`:

```
0.0001100110011...‚ÇÇ = 1.1001100110011...‚ÇÇ √ó 2‚Åª‚Å¥
```

- –ó–Ω–∞–∫: `0` (–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ)
- –≠–∫—Å–ø–æ–Ω–µ–Ω—Ç–∞: `-4`
- –ú–∞–Ω—Ç–∏—Å—Å–∞ (–ø–æ—Å–ª–µ —Ç–æ—á–∫–∏): `1001100110011...` (–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ)

### –®–∞–≥ 3: –ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ç—ã

–°–º–µ—â–µ–Ω–∏–µ = 1023 ‚Üí –∫–æ–¥ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ç—ã = `-4 + 1023 = 1019`

`1019` –≤ –¥–≤–æ–∏—á–Ω–æ–º –≤–∏–¥–µ (11 –±–∏—Ç):  
`1019 = 01111111011‚ÇÇ`

### –®–∞–≥ 4: –û–∫—Ä—É–≥–ª–µ–Ω–∏–µ –º–∞–Ω—Ç–∏—Å—Å—ã –¥–æ 52 –±–∏—Ç

–ë–µ—Ä—ë–º –ø–µ—Ä–≤—ã–µ 52 –±–∏—Ç–∞ –¥—Ä–æ–±–Ω–æ–π —á–∞—Å—Ç–∏ –ø–æ—Å–ª–µ `1.`:

```
1001100110011001100110011001100110011001100110011001
```

(–æ—Å—Ç–∞–ª—å–Ω—ã–µ –±–∏—Ç—ã –æ—Ç–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è —Å –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º –ø–æ –ø—Ä–∞–≤–∏–ª—É "–∫ –±–ª–∏–∂–∞–π—à–µ–º—É —á—ë—Ç–Ω–æ–º—É")

### –®–∞–≥ 5: –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö —á–∞—Å—Ç–µ–π

| –ü–æ–ª–µ     | –ó–Ω–∞—á–µ–Ω–∏–µ (–≤ –¥–≤–æ–∏—á–Ω–æ–º –≤–∏–¥–µ)                  |
|----------|---------------------------------------------|
| –ó–Ω–∞–∫     | `0`                                         |
| –≠–∫—Å–ø–æ–Ω–µ–Ω—Ç–∞ | `01111111011`                             |
| –ú–∞–Ω—Ç–∏—Å—Å–∞ | `1001100110011001100110011001100110011001100110011001` |

–ü–æ–ª–Ω—ã–π 64-–±–∏—Ç–Ω—ã–π —à–∞–±–ª–æ–Ω (–≤ —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–æ–º –≤–∏–¥–µ):

```
0x3FB999999999999A
```

### –®–∞–≥ 6: –†–µ–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è

–ï—Å–ª–∏ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —ç—Ç–æ –æ–±—Ä–∞—Ç–Ω–æ –≤ –¥–µ—Å—è—Ç–∏—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É, –ø–æ–ª—É—á–∏–º:

```
0.1000000000000000055511151231257827021181583404541015625
```